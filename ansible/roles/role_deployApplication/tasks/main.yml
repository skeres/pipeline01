---
# tasks to deploy applications

- name: delete existing app files on target server
  shell: rm -rf /usr/share/nginx/html/*
  become: yes

- name: checkout repository
  git:
    repo: 'https://github.com/skeres/p1.git'
    #dest: /usr/src/ansible_workspace/projectApp/checkout
    dest: /usr/share/nginx/html/
    version: master
    force: yes
  become: yes

- name: Touch a file (equivalent to 0644)
  file:
    path: /root/conf
    state: touch
    mode: u=rw,g=r,o=r
  become: yes

- name: update file
  shell: echo {{_system_memory}} >> /root/conf
  become: yes
